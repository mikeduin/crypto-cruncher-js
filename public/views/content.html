<div class="spacer"></div>

<div class="row arb-header">
  <div class="row">
    <div class="col s4">
      <select class="browser-default col s9" ng-model="vm.currSelected" ng-options="currency.full_name for currency in vm.symbolIndex | orderBy: 'full_name'">
        <option>(browse all cryptos)</option>
      </select>
      <button class="btn col offset-s1 s2" name="button" ng-click="vm.addCurr()">Add</button>
    </div>
    <div class="col s5 center-align" ng-click="vm.showSearch()">
      Search for a Crypto
      <input ng-model="cryptoSearch">
    </div>
    <div class="col s3 input-field">
      <select ng-model="vm.activeMkt" ng-change="vm.adjustDec()">
        <option selected value="BTC">Bitcoin (BTC)</option>
        <option value="USD">USD$ (USD)</option>
        <option value="ETH">Ethereum (ETH)</option>
      </select>
    </div>
  </div>
  <div class="row cryptoSearch" ng-show="vm.searchActive">
    <span class="findCrypto" ng-repeat="symbol in vm.symbolIndex | filter: cryptoSearch" ng-click="vm.searchSelected = symbol.full_name">{{symbol.full_name}}</span>
  </div>
</div>


<div class="wrapper" ng-click="vm.searchActive = false">
  <div class="row">
    <table class="col s12">
      <thead>
        <tr>
          <th>Currency</th>
          <th></th>
          <th>Low</th>
          <th>High</th>
          <th>Spread %</th>
          <th>GDAX</th>
          <th>Bittrex</th>
          <th>Binance</th>
          <th>HitBTC</th>
        </tr>
      </thead>
      <tbody>
        <tr ng-repeat="ticker in vm.activeTickers | orderBy: vm.spread(ticker.maxs[vm.activeMkt], ticker.mins[vm.activeMkt])">
          <td> {{ticker.full_name}} </td>
          <td> <span ng-click="vm.removeCurr(ticker)" tooltipped data-position="left" data-delay="20" data-tooltip="Remove"><i class="fa fa-times-circle" aria-hidden="true"></i></span> </td>
          <td> {{ticker.mins[vm.activeMkt] | number: vm.activeDec}} </td>
          <td> {{ticker.maxs[vm.activeMkt] | number: vm.activeDec}} </td>
          <td> {{vm.spread(ticker.maxs[vm.activeMkt], ticker.mins[vm.activeMkt]) | percentage: 1}}</td>
          <td ng-class="{buy: vm.gdaxMkt[ticker.market[vm.activeMkt]['gdax']] == ticker.mins[vm.activeMkt], sell: vm.gdaxMkt[ticker.market[vm.activeMkt]['gdax']] == ticker.maxs[vm.activeMkt]}"> {{vm.gdaxMkt[ticker.market[vm.activeMkt]['gdax']] | number: vm.activeDec}} </td>
          <td ng-class="{buy: vm.bittrexMkt[ticker.market[vm.activeMkt]['bittrex']] == ticker.mins[vm.activeMkt], sell: vm.bittrexMkt[ticker.market[vm.activeMkt]['bittrex']] == ticker.maxs[vm.activeMkt]}"> {{vm.bittrexMkt[ticker.market[vm.activeMkt]['bittrex']] | number: vm.activeDec}} </td>
          <td ng-class="{buy: vm.binanceMkt[ticker.market[vm.activeMkt]['binance']] == ticker.mins[vm.activeMkt], sell: vm.binanceMkt[ticker.market[vm.activeMkt]['binance']] == ticker.maxs[vm.activeMkt]}"> {{vm.binanceMkt[ticker.market[vm.activeMkt]['binance']] | number: vm.activeDec}} </td>
          <td ng-class="{buy: vm.hitbtcMkt[ticker.market[vm.activeMkt]['hitbtc']] == ticker.mins[vm.activeMkt], sell: vm.hitbtcMkt[ticker.market[vm.activeMkt]['hitbtc']] == ticker.maxs[vm.activeMkt]}"> {{vm.hitbtcMkt[ticker.market[vm.activeMkt]['hitbtc']] | number: vm.activeDec}} </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
